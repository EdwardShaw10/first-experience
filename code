兼容不同浏览器

window.onload = f1; 						// 注册load事件类型
if(document.addEventListener){ 			// 兼容DOM标准
    document.addEventListener("DOMContentLoaded", f, false); 
	// 注册DOMContentLoaded事件类型
}
function f(){
    alert("我提前执行了");
}
function f1(){
    alert("页面初始化完毕");
}

if(window.ActiveXObject){ 						// 兼容IE浏览器
    document.write("<script id=ie_onload defer src=javascript:void(0)><\/script>");							// 写入脚本标签
    document.getElementById("ie_onload").onreadystatechange=function(){
    // 判断脚本标签的状态
        if(this.readyState == "complete"){
		// 如果状态为完成，则说明文档结构加载已完毕
            this.onreadystatechange = null; 		// 清空当前方法
            f();	// 调用预先执行的回调函数
        }
    }
}
 

if (/WebKit/i.test(navigator.userAgent)){ 		// 兼容Safari浏览器
    var _timer = setInterval(function(){		// 定义时间监测器
        if (/loaded|complete/.test(document.readyState)) {
		// 如果当前状态显示完成
            clearInterval(_timer); 				// 清除时间监测器
            f();									// 调用预先执行的回调函数
        }
    }, 10);
}
