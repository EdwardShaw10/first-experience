兼容不同浏览器

window.onload = f1; 						// 注册load事件类型
if(document.addEventListener){ 			// 兼容DOM标准
    document.addEventListener("DOMContentLoaded", f, false); 
	// 注册DOMContentLoaded事件类型
}
function f(){
    alert("我提前执行了");
}
function f1(){
    alert("页面初始化完毕");
}

if(window.ActiveXObject){ 						// 兼容IE浏览器
    document.write("<script id=ie_onload defer src=javascript:void(0)><\/script>");							// 写入脚本标签
    document.getElementById("ie_onload").onreadystatechange=function(){
    // 判断脚本标签的状态
        if(this.readyState == "complete"){
		// 如果状态为完成，则说明文档结构加载已完毕
            this.onreadystatechange = null; 		// 清空当前方法
            f();	// 调用预先执行的回调函数
        }
    }
}
 

if (/WebKit/i.test(navigator.userAgent)){ 		// 兼容Safari浏览器
    var _timer = setInterval(function(){		// 定义时间监测器
        if (/loaded|complete/.test(document.readyState)) {
		// 如果当前状态显示完成
            clearInterval(_timer); 				// 清除时间监测器
            f();									// 调用预先执行的回调函数
        }
    }, 10);
}


调整内容随窗口比例变化
var box = document.getElementById("box");		// �ｷ����絖���綣�������
box.style.position = "absolute";				// 膸�絲劫�篏�
box.style.backgroundColor = "red";		// ������
box.style.width = w() * 0.8 + "px";	// 莅丞舟��絖�絎遵墾筝榊����綺���0.8��
box.style.height = h() * 0.8 + "px";	// 莅丞舟��絖�蕭�綺�減腦����綺���0.8��
window.onresize = function(){	// 羈���resize篋�篁九����醇�逸�����莪��雁��絖�紊у��
    box.style.width = w() * 0.8 + "px";
    box.style.height = h() * 0.8 + "px";
}
function w(){					// �ｷ��腦����綺�
    if (window.innerWidth) 		// �弱�DOM
        return window.innerWidth;
    else if ((document.body) && (document.body.clientWidth)) 
	// �弱�IE
        return document.body.clientWidth;
}
function h(){					// �ｷ��腦����綺�
    if (window.innerHeight) 	// �弱�DOM
        return window.innerHeight;
    else if ((document.body) && (document.body.clientHeight)) 
	// �弱�IE
        return document.body.clientHeight;
}


错误捕获

window.onerror = function(message){ 		// 捕获浏览器错误行为
   alert("错误原因：" + arguments[0]+ 
       "\n错误URL: " +  arguments[1] + 
       "\n错误行号: " + arguments[2]
    );
   return true; 							// 禁止浏览器显示标准出错信息
}
a.innerHTML = "";							// 制造错误机会

